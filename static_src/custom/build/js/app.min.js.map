{"version":3,"names":[],"mappings":"","sources":["app.min.js"],"sourcesContent":["\t// Menu burger\r\n\tconst iconMenu = document.querySelector('.menu__icon');\r\n\tconst menuBody = document.querySelector('.menu__body');\r\n\tconst menuTop = document.querySelector('.header__content');\r\n\tif (iconMenu) {\r\n\t\ticonMenu.addEventListener(\"click\", function (e) {\r\n\t\t\tdocument.body.classList.toggle('lock');\r\n\t\t\ticonMenu.classList.toggle('active');\r\n\t\t\tmenuBody.classList.toggle('active');\r\n\t\t\tmenuTop.classList.toggle('fixed-menu');\r\n\t\t});\r\n\t}\r\n\r\n// Importing CanvasScrollHero\r\n// Logging\r\nconst logContainer = document.getElementById('comments');\r\nconst log = text => {\r\n    if (logContainer) {\r\n        logContainer.innerHTML += text + '\\n';\r\n    } else {\r\n        console.log(text);\r\n    }\r\n};\r\n\r\n// Loading indicator\r\nconst startProgress = () => {\r\n    document.documentElement.classList.add('cursor-loading');\r\n};\r\n\r\nconst stopProgress = () => {\r\n    document.documentElement.classList.remove('cursor-loading');\r\n};\r\n\r\n// average over an array\r\nconst average = arr => {\r\n    return (arr.reduce((a, b) => a + b, 0) / arr.length).toFixed(2);\r\n};\r\n\r\n// promise with timeout\r\nconst withTimeout = async (promise, timeout) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        setTimeout(() => {\r\n            reject(`Promise ${promise} timed out at ${timeout}ms`);\r\n        }, timeout);\r\n\r\n        await promise;\r\n        resolve(promise);\r\n    });\r\n};\r\nfunction ScrollObservable() {\r\n    this._observers = [];\r\n\r\n    // using RAF as a petty debounce\r\n    let inProgress = false;\r\n    const handler = () => {\r\n        if (inProgress) return;\r\n        inProgress = true;\r\n\r\n        window.requestAnimationFrame(() => {\r\n            this._process();\r\n\r\n            inProgress = false;\r\n        });\r\n    };\r\n\r\n    window.addEventListener('scroll', handler);\r\n}\r\n\r\nScrollObservable.prototype._process = function() {\r\n\r\n    const viewportHeight = document.documentElement.clientHeight;\r\n    const documentHeight = document.body.clientHeight;\r\n    const offsetCanvasHero = $('.canvas-hero-block').offset().top;\r\n\r\n    const  scrolled = Math.max (\r\n        window.scrollY - offsetCanvasHero,\r\n        window.pageYOffset - offsetCanvasHero,\r\n        document.documentElement.scrollTop - offsetCanvasHero,\r\n        document.body.scrollTop\r\n    );\r\n\r\n    const scrolledPercentage = Math.round((100 * (100 * scrolled)) / (documentHeight - viewportHeight)) / 100;\r\n\r\n    this.publish(scrolledPercentage);\r\n};\r\n\r\nScrollObservable.prototype.subscribe = function(observer) {\r\n    this._observers.push(observer);\r\n};\r\n\r\nScrollObservable.prototype.publish = function(value) {\r\n\r\n    this._observers.forEach(observer => {\r\n        observer.next(value);\r\n    });\r\n};\r\n\r\nfunction ScrollObservableWhy() {\r\n    this._observersWhy = [];\r\n\r\n    // using RAF as a petty debounce\r\n    let inProgress = false;\r\n    const handlerWhy = () => {\r\n        if (inProgress) return;\r\n        inProgress = true;\r\n\r\n        window.requestAnimationFrame(() => {\r\n            this._process();\r\n\r\n            inProgress = false;\r\n        });\r\n    };\r\n\r\n    window.addEventListener('scroll', handlerWhy);\r\n}\r\n\r\nScrollObservableWhy.prototype._process = function() {\r\n\r\n    const viewportHeight = document.documentElement.clientHeight;\r\n    const documentHeight = document.body.clientHeight;\r\n    const offsetWhy = $('.why').offset().top;\r\n\r\n    let scrolled = Math.max (\r\n\r\n        window.scrollY - offsetWhy,\r\n        window.pageYOffset - offsetWhy,\r\n        document.documentElement.scrollTop - offsetWhy,\r\n        document.body.scrollTop\r\n    );\r\n\r\n    const scrolledPercentageWhy = Math.round((100 * (100 * scrolled)) / (documentHeight - viewportHeight)) / 100;\r\n\r\n    this.publish(scrolledPercentageWhy);\r\n};\r\n\r\nScrollObservableWhy.prototype.subscribe = function(observerWhy) {\r\n    this._observersWhy.push(observerWhy);\r\n};\r\n\r\nScrollObservableWhy.prototype.publish = function(value) {\r\n    this._observersWhy.forEach(observerWhy => {\r\n        observerWhy.next(value);\r\n    });\r\n};\r\nconst CanvasFrameScrubber = (() => {\r\n    const create = (context, frames) => {\r\n        let currentFrame = 0;\r\n\r\n        const observer = {\r\n            next: percentage => {\r\n                let frameIndex;\r\n\r\n                if($(window).width() < \"992\") {\r\n                    frameIndex = Math.floor((percentage * (frames.length - 1)) / 30);\r\n                } else {\r\n                    frameIndex = Math.floor((percentage * (frames.length - 1)) / 50);\r\n                }\r\n\r\n                if (currentFrame === frameIndex) return\r\n\r\n                if ($(window).scrollTop() > $('.canvas-hero-block').offset().top &&\r\n                    $(window).scrollTop() + window.innerHeight < $('#canvas-hero-end').offset().top) {\r\n                    // положение фреймов от блока\r\n                    window.requestAnimationFrame(() => {\r\n                        context.drawImage(frames[frameIndex], 0, 0);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        return observer;\r\n    };\r\n\r\n    return {\r\n        create: create\r\n    };\r\n})();\r\n\r\nconst CanvasFrameScrubberWhy = (() => {\r\n    const create = (contextWhy, framesWhy) => {\r\n        let currentFrame = 0;\r\n\r\n        const observerWhy = {\r\n            next: percentage => {\r\n                const frameIndex = Math.floor((percentage * (framesWhy.length - 1)) / 43);\r\n\r\n                if (currentFrame === frameIndex) return;\r\n\r\n                if ($(window).scrollTop() > $('.why').offset().top &&\r\n                    $(window).scrollTop() + window.innerHeight < $('#why-end').offset().top) {\r\n                    // положение фреймов от блока\r\n                    window.requestAnimationFrame(() => {\r\n                        contextWhy.drawImage(framesWhy[frameIndex], 0, 0);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        return observerWhy;\r\n    };\r\n\r\n    return {\r\n        create: create\r\n    };\r\n})();\r\nconst FrameUnpacker = (() => {\r\n    const unpack = async options => {\r\n        const urlPattern = options.urlPattern,\r\n            start = options.start,\r\n            end = options.end,\r\n            padding = options.padding;\r\n\r\n        const bitmaps = [];\r\n        const calls = [];\r\n\r\n        const timeStart = performance.now();\r\n\r\n        // download each frame image and prep it up\r\n        for (let index = start; index <= end; index++) {\r\n            const id = index.toString().padStart(padding, '0');\r\n            const url = urlPattern.replace('{{id}}', id);\r\n\r\n            calls.push(\r\n                fetch(url).then(res =>\r\n                    res\r\n                        .blob()\r\n                        .then(blob =>\r\n                            createImageBitmap(blob).then(bitmap => bitmaps.push({ id: index, bitmap: bitmap }))\r\n                        )\r\n                )\r\n            );\r\n        }\r\n\r\n        // wait for all the downloads to finish... (a more eager implementation that starts putting\r\n        // the scrubbing as soon as the first few frames are downloaded can also be done, but we'll\r\n        // keep thing s simple for now)\r\n        await Promise.all(calls);\r\n\r\n        // sort the downloaded frame bitmaps in order, they could have been downloaded haphazardly\r\n        bitmaps.sort((a, b) => {\r\n            return a.id - b.id;\r\n        });\r\n\r\n        // once that's done, construct an array of just frames that would be returned\r\n        const frames = [];\r\n        bitmaps.map(bitmap => frames.push(bitmap.bitmap));\r\n\r\n        const timeDelta = performance.now() - timeStart;\r\n        log(`Average extraction time per frame: ${timeDelta / (end - start)}ms`);\r\n\r\n        return frames;\r\n    };\r\n\r\n    return {\r\n        unpack: unpack\r\n    };\r\n})();\r\n\r\nconst FrameUnpackerWhy = (() => {\r\n    const unpackWhy = async options => {\r\n        const urlPattern = options.urlPattern,\r\n            start = options.start,\r\n            end = options.end,\r\n            padding = options.padding;\r\n\r\n        const bitmaps = [];\r\n        const calls = [];\r\n\r\n        const timeStart = performance.now();\r\n\r\n        // download each frame image and prep it up\r\n        for (let index = start; index <= end; index++) {\r\n            const id = index.toString().padStart(padding, '0');\r\n            const url = urlPattern.replace('{{id}}', id);\r\n\r\n            calls.push(\r\n                fetch(url).then(res =>\r\n                    res\r\n                        .blob()\r\n                        .then(blob =>\r\n                            createImageBitmap(blob).then(bitmap => bitmaps.push({ id: index, bitmap: bitmap }))\r\n                        )\r\n                )\r\n            );\r\n        }\r\n\r\n        // wait for all the downloads to finish... (a more eager implementation that starts putting\r\n        // the scrubbing as soon as the first few frames are downloaded can also be done, but we'll\r\n        // keep thing s simple for now)\r\n        await Promise.all(calls);\r\n\r\n        // sort the downloaded frame bitmaps in order, they could have been downloaded haphazardly\r\n        bitmaps.sort((a, b) => {\r\n            return a.id - b.id;\r\n        });\r\n\r\n        // once that's done, construct an array of just frames that would be returned\r\n        const framesWhy = [];\r\n        bitmaps.map(bitmap => framesWhy.push(bitmap.bitmap));\r\n\r\n        const timeDelta = performance.now() - timeStart;\r\n        log(`Average extraction time per frame: ${timeDelta / (end - start)}ms`);\r\n\r\n        return framesWhy;\r\n    };\r\n\r\n    return {\r\n        unpackWhy: unpackWhy\r\n    };\r\n})();\r\nif (document.querySelector('.canvas-hero-block')) {\r\n\r\n    (async () => {\r\n\r\n        startProgress();\r\n\r\n        let videoContainer;\r\n        let framesUrlElement;\r\n\r\n        if($(window).width() < \"992\") {\r\n            videoContainer = document.querySelector('#canvasHeroMob');\r\n            framesUrlElement = document.querySelector('input[name=\"frames-url-mob\"]');\r\n        } else {\r\n            videoContainer = document.querySelector('#canvasHeroPC');\r\n            framesUrlElement = document.querySelector('input[name=\"frames-url-pc\"]');\r\n        }\r\n\r\n        if (!videoContainer || !framesUrlElement) {\r\n            throw new Error('Element missing!');\r\n        }\r\n\r\n        const framesUrlPattern = framesUrlElement.value;\r\n        const framesUrlStart = parseInt(framesUrlElement.dataset.frameStart, 10);\r\n        const framesUrlEnd = parseInt(framesUrlElement.dataset.frameEnd, 10);\r\n        const framesIdPadding = parseInt(framesUrlElement.dataset.frameIdPadding, 10);\r\n\r\n        log(`Initializing frames download...`);\r\n\r\n        log(`Please be patient. Downloaing ${framesUrlEnd} frames...`);\r\n\r\n        const startTime = Date.now();\r\n\r\n        const frames = await FrameUnpacker.unpack({\r\n            urlPattern: framesUrlPattern,\r\n            start: framesUrlStart,\r\n            end: framesUrlEnd,\r\n            padding: framesIdPadding\r\n        });\r\n\r\n        const endTime = Date.now();\r\n\r\n        log(`Took ${(endTime - startTime) / 1000} seconds.`);\r\n\r\n        log('Painting canvas with first frame...');\r\n\r\n        const canvas = document.createElement('canvas');\r\n        canvas.classList.add('canvas');\r\n        canvas.height = frames[0].height;\r\n        canvas.width = frames[0].width;\r\n        const context = canvas.getContext('2d');\r\n        context.drawImage(frames[0], 0, 0);\r\n\r\n        videoContainer.appendChild(canvas);\r\n\r\n        log('Setting up scrubber...');\r\n\r\n        const observer = CanvasFrameScrubber.create(context, frames);\r\n\r\n        const observable = new ScrollObservable();\r\n        observable.subscribe(observer);\r\n\r\n        log('Ready! Scroll to scrub.');\r\n\r\n        stopProgress();\r\n\r\n\r\n        /* Preloader */\r\n        const preloader = document.querySelector('.preloader')\r\n\r\n        preloader.classList.add('preloader__hidden')\r\n\r\n        setTimeout(\r\n            function(){\r\n                let scrollTopCanvas;\r\n                if($(window).width() < \"992\") {\r\n                    scrollTopCanvas = 500;\r\n                } else {\r\n                    scrollTopCanvas = 2500;\r\n                }\r\n                $('html, body').animate({scrollTop: scrollTopCanvas},2000);\r\n            },\r\n            1500\r\n        );\r\n    })();\r\n\r\n}\r\n\r\nif (document.querySelector('.why')) {\r\n\r\n    (async () => {\r\n\r\n        startProgress();\r\n\r\n        const videoContainerWhy = document.querySelector('#canvasWhy');\r\n        const framesUrlElementWhy = document.querySelector('input[name=\"frames-url-why\"]');\r\n        if (!videoContainerWhy || !framesUrlElementWhy) {\r\n            throw new Error('Element missing!');\r\n        }\r\n\r\n        const framesUrlPatternWhy = framesUrlElementWhy.value;\r\n        const framesUrlStartWhy = parseInt(framesUrlElementWhy.dataset.frameStart, 10);\r\n        const framesUrlEndWhy = parseInt(framesUrlElementWhy.dataset.frameEnd, 10);\r\n        const framesIdPaddingWhy = parseInt(framesUrlElementWhy.dataset.frameIdPadding, 10);\r\n\r\n        log(`Initializing frames download...`);\r\n\r\n        log(`Please be patient. Downloaing ${framesUrlEndWhy} frames...`);\r\n\r\n        const startTimeWhy = Date.now();\r\n\r\n        const framesWhy = await FrameUnpackerWhy.unpackWhy({\r\n            urlPattern: framesUrlPatternWhy,\r\n            start: framesUrlStartWhy,\r\n            end: framesUrlEndWhy,\r\n            padding: framesIdPaddingWhy\r\n        });\r\n\r\n        const endTimeWhy = Date.now();\r\n\r\n        log(`Took ${(endTimeWhy - startTimeWhy) / 1000} seconds.`);\r\n\r\n        log('Painting canvas with first frame...');\r\n\r\n        const canvasWhy = document.createElement('canvas');\r\n        canvasWhy.classList.add('canvas');\r\n        canvasWhy.height = framesWhy[0].height;\r\n        canvasWhy.width = framesWhy[0].width;\r\n        const contextWhy = canvasWhy.getContext('2d');\r\n        contextWhy.drawImage(framesWhy[0], 0, 0);\r\n\r\n        videoContainerWhy.appendChild(canvasWhy);\r\n\r\n        log('Setting up scrubber...');\r\n\r\n        const observerWhy = CanvasFrameScrubberWhy.create(contextWhy, framesWhy);\r\n\r\n        const observableWhy = new ScrollObservableWhy();\r\n        observableWhy.subscribe(observerWhy);\r\n\r\n        log('Ready! Scroll to scrub.');\r\n\r\n        stopProgress();\r\n    })();\r\n}\r\n\r\n// Importing other js files\r\nfunction initSliderCart() {\r\n\tnew Swiper('.cart__swiper', {\r\n\t\tloop: true,\r\n\t\tpagination: {\r\n\t\t\tel: '.swiper-pagination',\r\n\t\t\tclickable: true\r\n\t\t},\r\n\t\tautoplay: {\r\n\t\t\tdelay: 2500,\r\n\t\t},\r\n\t});\r\n}\r\n\r\nfunction detectDeviceCart() {\r\n\tif (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n\t\t// true for mobile device\r\n\t\tinitSliderCart();\r\n\t} else {\r\n\t\t// false for not mobile device\r\n\t}\r\n}\r\ndetectDeviceCart();\r\n\r\nfunction initSliderLike() {\r\n\tnew Swiper('.like__swiper', {\r\n\t\tslidesPerView: 1,\r\n\t\tloop: true,\r\n\t\tpagination: {\r\n\t\t\tel: '.swiper-pagination',\r\n\t\t\tclickable: true\r\n\t\t},\r\n\t\tautoplay: {\r\n\t\t\tdelay: 2500,\r\n\t\t},\r\n\t\tbreakpoints: {\r\n\t\t\t768: {\r\n\t\t\t\tslidesPerView: 2,\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n}\r\n\r\nfunction detectDeviceLike() {\r\n\tif (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n\t\t// true for mobile device\r\n\t\tinitSliderLike();\r\n\t} else {\r\n\t\t// false for not mobile device\r\n\t}\r\n}\r\ndetectDeviceLike();\r\nvar move_array = [];\r\nvar move_objects = document.querySelectorAll(\"[data-move]\");\r\n\r\nif (move_objects.length > 0) {\r\n\tfor (var _index10 = 0; _index10 < move_objects.length; _index10++) {\r\n\t\tvar _el6 = move_objects[_index10];\r\n\r\n\t\tvar data_move = _el6.getAttribute(\"data-move\");\r\n\r\n\t\tif (data_move != \"\" || data_move != null) {\r\n\t\t\t_el6.setAttribute(\"data-move-index\", _index10);\r\n\r\n\t\t\tmove_array[_index10] = {\r\n\t\t\t\tparent: _el6.parentNode,\r\n\t\t\t\tindex: index_in_parent(_el6)\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction dynamic_adapt() {\r\n\tvar w = document.querySelector(\"body\").offsetWidth;\r\n\r\n\tif (move_objects.length > 0) {\r\n\t\tfor (var _index11 = 0; _index11 < move_objects.length; _index11++) {\r\n\t\t\tvar _el7 = move_objects[_index11];\r\n\r\n\t\t\tvar _data_move = _el7.getAttribute(\"data-move\");\r\n\r\n\t\t\tif (_data_move != \"\" || _data_move != null) {\r\n\t\t\t\tvar data_array = _data_move.split(\",\");\r\n\r\n\t\t\t\tvar data_parent = document.querySelector(\".\" + data_array[0]);\r\n\t\t\t\tvar data_index = data_array[1];\r\n\t\t\t\tvar data_bp = data_array[2];\r\n\r\n\t\t\t\tif (w < data_bp) {\r\n\t\t\t\t\tif (!_el7.classList.contains(\"js-move_done_\" + data_bp)) {\r\n\t\t\t\t\t\tif (data_index > 0) {\r\n\t\t\t\t\t\t\t//insertAfter\r\n\t\t\t\t\t\t\tvar actual_index = index_of_elements(data_parent)[data_index];\r\n\t\t\t\t\t\t\tdata_parent.insertBefore(_el7, data_parent.childNodes[actual_index]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdata_parent.insertBefore(_el7, data_parent.firstChild);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_el7.classList.add(\"js-move_done_\" + data_bp);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (_el7.classList.contains(\"js-move_done_\" + data_bp)) {\r\n\t\t\t\t\t\tdynamic_adaptive_back(_el7);\r\n\r\n\t\t\t\t\t\t_el7.classList.remove(\"js-move_done_\" + data_bp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction dynamic_adaptive_back(el) {\r\n\tvar index_original = el.getAttribute(\"data-move-index\");\r\n\tvar move_place = move_array[index_original];\r\n\tvar parent_place = move_place[\"parent\"];\r\n\tvar index_place = move_place[\"index\"];\r\n\r\n\tif (index_place > 0) {\r\n\t\t//insertAfter\r\n\t\tvar actual_index = index_of_elements(parent_place)[index_place];\r\n\t\tparent_place.insertBefore(el, parent_place.childNodes[actual_index]);\r\n\t} else {\r\n\t\tparent_place.insertBefore(el, parent_place.firstChild);\r\n\t}\r\n}\r\n\r\nfunction index_in_parent(node) {\r\n\tvar children = node.parentNode.childNodes;\r\n\tvar num = 0;\r\n\r\n\tfor (var _i2 = 0; _i2 < children.length; _i2++) {\r\n\t\tif (children[_i2] == node) return num;\r\n\t\tif (children[_i2].nodeType == 1) num++;\r\n\t}\r\n\r\n\treturn -1;\r\n}\r\n\r\nfunction index_of_elements(parent) {\r\n\tvar children = [];\r\n\r\n\tfor (var _i3 = 0; _i3 < parent.childNodes.length; _i3++) {\r\n\t\tif (parent.childNodes[_i3].nodeType == 1 && parent.childNodes[_i3].getAttribute(\"data-move\") == null) {\r\n\t\t\tchildren.push(_i3);\r\n\t\t}\r\n\t}\r\n\treturn children;\r\n}\r\n\r\nwindow.addEventListener(\"resize\", function (event) {\r\n\tdynamic_adapt();\r\n});\r\ndynamic_adapt();\r\n//youtube script\r\n// selector of all videos on the page\r\nconst videos = document.querySelectorAll('.video__player');\r\n\r\n// generate video url\r\nlet generateUrl = function (id) {\r\n\tlet query = '?rel=0&showinfo=0&autoplay=1';\r\n\r\n\treturn 'https://www.youtube.com/embed/' + id + query;\r\n};\r\n\r\n// creating iframe\r\nlet createIframe = function (id) {\r\n\tlet iframe = document.createElement('iframe');\r\n\r\n\tiframe.setAttribute('allowfullscreen', '');\r\n\tiframe.setAttribute('allow', 'autoplay; encrypted-media');\r\n\tiframe.setAttribute('src', generateUrl(id));\r\n\r\n\treturn iframe;\r\n};\r\n\r\n// main code\r\nvideos.forEach((el) => {\r\n\tlet videoHref = el.getAttribute('data-video');\r\n\r\n\tlet deletedLength = 'https://youtu.be/'.length;\r\n\r\n\tlet videoId = videoHref.substring(deletedLength, videoHref.length);\r\n\r\n\tlet img = el.querySelector('img');\r\n\tlet youtubeImgSrc = 'https://i.ytimg.com/vi/' + videoId + '/maxresdefault.jpg';\r\n\timg.setAttribute('src', youtubeImgSrc);\r\n\r\n\tel.addEventListener('click', (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tlet iframe = createIframe(videoId);\r\n\t\tel.querySelector('img').remove();\r\n\t\tel.appendChild(iframe);\r\n\t\tel.querySelector('button').remove();\r\n\t});\r\n});\r\n$(function () {\r\n\t$('select').selectric();\r\n});\r\n// ./tabs.js\r\nif (document.querySelector('.canvas-hero-block')) {\r\n\r\n    var screenHeight = window.innerHeight;\r\n    var Canvas_offset = $('.canvas-hero-block').offset().top;\r\n    var CanvasEnd_offset = $('#canvas-hero-end').offset().top;\r\n    var Canvas_items_stack = $('.canvas-hero-block').find(\"[class^=item]\");\r\n    var Canvas_step = $('.canvas-hero-block').innerHeight() / Canvas_items_stack.length;\r\n    var Canvas_crd = [];\r\n\r\n    for (let index = 0; index < Canvas_items_stack.length; index++) {\r\n        Canvas_crd[index] = index == 0 ? Canvas_offset + Canvas_step : Canvas_step + Canvas_crd[index - 1];\r\n    }\r\n\r\n    $(window).on('scroll', function () {\r\n        if ($(window).scrollTop() > Canvas_offset &&\r\n            $(window).scrollTop() + window.innerHeight < CanvasEnd_offset) {\r\n\r\n            for (let index = 0; index < Canvas_crd.length; index++) {\r\n                if ($(document).scrollTop() < Canvas_crd[index]) {\r\n                    $('.block-scroll').find(`[class^=item]:not(.item-${index})`).removeClass('element-show');\r\n                    if ($('.block-scroll').find(`.item-${index}`).removeClass('element-show')){\r\n                        $('.block-scroll').find(`.item-${index}`).addClass('element-show');\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n    })\r\n\r\n\r\n\r\n}\r\n\r\nif (document.querySelector('.be-bigger')) {\r\n\r\n    var be_bigger_items_stack = $('.be-bigger').find('.be-bigger__item'); // список контейнеров с фото справа\r\n    var be_bigger_offset = $('.be-bigger').offset().top;\r\n    var be_bigger_step = ($('#be-bigger-end').offset().top - window.innerHeight) / be_bigger_items_stack.length;\r\n    var be_bigger_crd = [];\r\n\r\n    //////// Обработчик изменения цвета надписи в be-bigger блоке ///////////\r\n    for (let index = 0; index < be_bigger_items_stack.length; index++) {\r\n        be_bigger_crd[index] = index == 0 ? be_bigger_step : be_bigger_step + be_bigger_crd[index - 1];\r\n    }\r\n\r\n    $(window).on('scroll', function () {\r\n        for (let index = 0; index < be_bigger_crd.length; index++) {\r\n            if ($(document).scrollTop() < be_bigger_offset + be_bigger_crd[index]) {\r\n\r\n\r\n                $('.be-bigger__title').css({\r\n                    color: $(be_bigger_items_stack[index]).attr('data-color')\r\n                });\r\n\r\n                $('#be-bigger').find(`[class^=item]:not(.item-${index})`).removeClass('element-show');\r\n                if ($('#be-bigger').find(`.item-${index}`).removeClass('element-show')){\r\n                    $('#be-bigger').find(`.item-${index}`).addClass('element-show');\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nif (document.querySelector('.attract')) {\r\n\r\n    var Attract_offset = $('#attract').offset().top;\r\n    var AttractEnd_offset = $('#attract-end').offset().top;\r\n    var Attract_items_stack = $('#attract').find(\"[class^=item]\");\r\n    var Attract_step = $('#attract').innerHeight() / Attract_items_stack.length;\r\n    var Attract_crd = [];\r\n\r\n\r\n\r\n    for (let index = 0; index < Attract_items_stack.length; index++) {\r\n        Attract_crd[index] = index == 0 ? Attract_offset + Attract_step : Attract_step + Attract_crd[index - 1];\r\n    }\r\n\r\n    $(window).on('scroll', function () {\r\n        if ($(window).scrollTop() > Attract_offset &&\r\n            $(window).scrollTop() + window.innerHeight < AttractEnd_offset) {\r\n\r\n\r\n\r\n            for (let index = 0; index < Attract_crd.length; index++) {\r\n                if ($(document).scrollTop() < Attract_crd[index]) {\r\n                    $('.block-scroll').find(`[class^=item]:not(.item-${index})`).removeClass('element-show');\r\n                    if ($('.block-scroll').find(`.item-${index}`).removeClass('element-show')){\r\n                        $('.block-scroll').find(`.item-${index}`).addClass('element-show');\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n    })\r\n\r\n}\r\n\r\nif (document.querySelector('.weare')) {\r\n\r\n    var Weare_offset = $('#weare').offset().top;\r\n    var WeareEnd_offset = $('#weare-end').offset().top;\r\n    var Weare_items_stack = $('#weare').find(\"[class^=item]\");\r\n    var Weare_step = $('#weare').innerHeight() / Weare_items_stack.length;\r\n    var Weare_crd = [];\r\n\r\n\r\n    for (let index = 0; index < Weare_items_stack.length; index++) {\r\n        Weare_crd[index] = index == 0 ? Weare_offset + Weare_step : Weare_step + Weare_crd[index - 1];\r\n    }\r\n\r\n    $(window).on('scroll', function () {\r\n        if ($(window).scrollTop() > Weare_offset &&\r\n            $(window).scrollTop() + window.innerHeight < WeareEnd_offset) {\r\n\r\n            for (let index = 0; index < Weare_crd.length; index++) {\r\n                if ($(document).scrollTop() < Weare_crd[index]) {\r\n                    $('.block-scroll').find(`[class^=item]:not(.item-${index})`).removeClass('element-show');\r\n                    if ($('.block-scroll').find(`.item-${index}`).removeClass('element-show')){\r\n                        $('.block-scroll').find(`.item-${index}`).addClass('element-show');\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n    })\r\n}\r\n\r\nfunction show_text_on_home_banner(banner_id) {\r\n    let wrapper_id = banner_id;\r\n    if ($(document).scrollTop() > $(wrapper_id).offset().top){\r\n        $(wrapper_id).find('.item-0').addClass('element-show');\r\n    }    \r\n}\r\n\r\nif (document.querySelector('.why')) {\r\n\r\n    var Why_offset = $('#why').offset().top;\r\n    var WhyEnd_offset = $('#why-end').offset().top;\r\n    var Why_items_stack = $('#why').find(\"[class^=item]\");\r\n    var Why_step = $('#why').innerHeight() / Why_items_stack.length;\r\n    var Why_crd = [];\r\n\r\n    for (let index = 0; index < Why_items_stack.length; index++) {\r\n        Why_crd[index] = index == 0 ? Why_offset + Why_step : Why_step + Why_crd[index - 1];\r\n    }\r\n\r\n    $(window).on('scroll', function () {\r\n        if ($(window).scrollTop() > Why_offset &&\r\n            $(window).scrollTop() + window.innerHeight < WhyEnd_offset) {\r\n\r\n            // $('.be-bigger__title').css({\r\n            //     color: $(be_bigger_items_stack[index]).attr('data-color')\r\n            // });\r\n\r\n            for (let index = 0; index < Why_crd.length; index++) {\r\n                if ($(document).scrollTop() < Why_crd[index]) {\r\n\r\n\r\n                    $('.why__title').css({\r\n                        color: $($('.why').find(`[class^=item]`)[index]).attr('data-color')\r\n                    });\r\n\r\n                    $('.why__subtitle').css({\r\n                        color: $($('.why').find(`[class^=item]`)[index]).attr('data-color')\r\n                    });\r\n\r\n                    $('.block-scroll').find(`[class^=item]:not(.item-${index})`).removeClass('element-show');\r\n                    if ($('.block-scroll').find(`.item-${index}`).removeClass('element-show')){\r\n                        $('.block-scroll').find(`.item-${index}`).addClass('element-show');\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\nvar languageSwitcher = {\r\n\r\n    /**\r\n     * Init language switcher in header\r\n     */\r\n    init_header: function () {\r\n        let lang_textHeader = document.querySelector('.header-lang__text');\r\n        let lang_bodyHeader = document.querySelector('.header-lang');\r\n        lang_textHeader.addEventListener(\"click\", function (e) {\r\n            lang_bodyHeader.classList.toggle('is-active');\r\n        });\r\n        document.documentElement.addEventListener(\"click\", function (e) {\r\n            if (!e.target.closest('.header-lang')) {\r\n                lang_bodyHeader.classList.remove('is-active');\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Init language switcher in footer\r\n     */\r\n    init_footer: function () {\r\n        if (document.querySelector('.footer')) {\r\n            let lang_textFooter = document.querySelector('.header-lang__text-footer');\r\n            let lang_bodyFooter = document.querySelector('.header-lang-footer');\r\n            lang_textFooter.addEventListener(\"click\", function (e) {\r\n                lang_bodyFooter.classList.toggle('is-active');\r\n            });\r\n            document.documentElement.addEventListener(\"click\", function (e) {\r\n                if (!e.target.closest('.header-lang-footer')) {\r\n                    lang_bodyFooter.classList.remove('is-active');\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/*global jQuery */\r\n\r\n;(function($, o={}) {\r\n    o.basket = {\r\n        is_form_being_submitted: false,\r\n        init: function(options) {\r\n            if (typeof options == 'undefined') {\r\n                options = {'basketURL': document.URL};\r\n            }\r\n            o.basket.url = options.basketURL || document.URL;\r\n            $('#content_inner').on('click', '#basket_formset a[data-behaviours~=\"remove\"]', function(event) {\r\n                o.basket.checkAndSubmit($(this), 'form', 'DELETE');\r\n                event.preventDefault();\r\n            });\r\n\r\n            $('#content_inner').on('click', '[data-counter=plus], [data-counter=minus]', function(){\r\n                let input = $(this).parent().find('input');\r\n                let current_value = parseInt(input.val());\r\n                let step = $(this).data('counter') === 'plus' ? 1: -1;\r\n                let new_value = current_value + step;\r\n                if (new_value < 1){\r\n                    new_value = 1;\r\n                }\r\n                // else if (new_value > max_value){\r\n                //     new_value = max_value;\r\n                // }\r\n                input.val(new_value);\r\n                $(this).closest('#basket_formset').submit();\r\n\r\n                return false;\r\n            });\r\n\r\n            $('#content_inner').on('submit', '#basket_formset', o.basket.submitBasketForm);\r\n        },\r\n        submitBasketForm: function(event) {\r\n            $('#messages').html('');\r\n            var payload = $('#basket_formset').serializeArray();\r\n            $.post(o.basket.url, payload, o.basket.submitFormSuccess, 'json');\r\n            if (event) {\r\n                event.preventDefault();\r\n            }\r\n        },\r\n        submitFormSuccess: function(data) {\r\n            $('#content_inner').html(data.content_html);\r\n            $('.mini-basket-ajax').html(data.mini_basket_html);\r\n            $('select').selectric();\r\n\r\n            // Show any flash messages\r\n            o.messages.clear();\r\n            for (var level in data.messages) {\r\n                for (var i=0; i<data.messages[level].length; i++) {\r\n                    o.messages[level](data.messages[level][i]);\r\n                }\r\n            }\r\n            o.basket.is_form_being_submitted = false;\r\n        },\r\n        checkAndSubmit: function($ele, formPrefix, idSuffix) {\r\n            if (o.basket.is_form_being_submitted) {\r\n                return;\r\n            }\r\n            var formID = $ele.attr('data-id');\r\n            var inputID = '#id_' + formPrefix + '-' + formID + '-' + idSuffix;\r\n            $(inputID).attr('checked', 'checked');\r\n            $ele.closest('form').submit();\r\n            o.basket.is_form_being_submitted = true;\r\n        }\r\n    };\r\n\r\n    o.checkout = {\r\n        gateway: {\r\n            init: function () {\r\n                var radioWidgets = $('form input[name=options]');\r\n                var selectedRadioWidget = $('form input[name=options]:checked');\r\n                o.checkout.gateway.handleRadioSelection(selectedRadioWidget.val());\r\n                radioWidgets.change(o.checkout.gateway.handleRadioChange);\r\n                $('#id_username').focus();\r\n            },\r\n            // handleRadioChange: function () {\r\n            //     o.checkout.gateway.handleRadioSelection($(this).val());\r\n            // },\r\n            // handleRadioSelection: function (value) {\r\n            //     var pwInput = $('#id_password');\r\n            //     if (value == 'anonymous' || value == 'new') {\r\n            //         pwInput.attr('disabled', 'disabled');\r\n            //     } else {\r\n            //         pwInput.removeAttr('disabled');\r\n            //     }\r\n            // }\r\n        }\r\n    };\r\n\r\n    // Replicate Django's flash messages so they can be used by AJAX callbacks.\r\n    o.messages = {\r\n        addMessage: function(tag, msg) {\r\n            var msgHTML = '<div class=\"alert alert-dismissible fade show alert-' + tag + '\">' +\r\n                '<a href=\"#\" class=\"close\" data-dismiss=\"alert\">&times;</a>'  + msg +\r\n                '</div>';\r\n            $('#messages').append($(msgHTML));\r\n        },\r\n        debug: function(msg) { o.messages.addMessage('debug', msg); },\r\n        info: function(msg) { o.messages.addMessage('info', msg); },\r\n        success: function(msg) { o.messages.addMessage('success', msg); },\r\n        warning: function(msg) { o.messages.addMessage('warning', msg); },\r\n        error: function(msg) { o.messages.addMessage('danger', msg); },\r\n        clear: function() {\r\n            $('#messages').html('');\r\n        },\r\n        scrollTo: function() {\r\n            $('html').animate({scrollTop: $('#messages').offset().top});\r\n        },\r\n        closeAlert: function(e){\r\n            $('body').on('click', 'a.close', function(e){\r\n                e.preventDefault();\r\n                $(this).closest('.alert').remove();\r\n            })\r\n        },\r\n        init: function(){\r\n            o.messages.closeAlert();\r\n        }\r\n    };\r\n\r\n    o.init = function(){\r\n        o.messages.init();\r\n    }\r\n})(jQuery, window.oscar = window.oscar || {});\r\n\r\n$(document).ready(function() {\r\n    oscar.init();\r\n});\r\n\r\n// fix header\r\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\r\n\tif (document.documentElement.scrollTop > 0) {\r\n\t\theader.classList.add('header__scrolled');\r\n\t}\r\n\r\n\twindow.addEventListener(\"scroll\", function (e) {\r\n\t\tlet header = document.getElementById('header');\r\n\t\tif (window.scrollY > 0) {\r\n\t\t\theader.classList.add('header__scrolled');\t\t\r\n\t\t} else {\r\n\t\t\theader.classList.remove('header__scrolled');\r\n\t\t}\r\n\t}); \r\n  });\r\n\r\n//бегущая строка\r\n$(function ($, undefined) {\r\n\t$('.country__content--top').eocjsNewsticker({\r\n\t\t'speed': 25,\r\n\t\t'timeout': 0.5,\r\n\t\t'divider': '',\r\n\t});\r\n});\r\n\r\n$(function ($, undefined) {\r\n\t$('.country__content--bottom').eocjsNewsticker({\r\n\t\t'speed': 25,\r\n\t\t'timeout': 0.5,\r\n\t\t'divider': '',\r\n\t\t'direction': 'rtl'\r\n\t});\r\n});\r\n\r\n// анимация товара\r\n$(\".just-scan__images\").brazzersCarousel();\r\n\r\n// фильтер shop моб\r\n$('.button-filter').on('click', function () {\r\n\t$('body').addClass('scroll-no')\r\n\t$('.modal-filter[data-modal=\"content-filter\"]').addClass('active')\r\n})\r\n\r\n$('.button-sort').on('click', function () {\r\n\t$('body').addClass('scroll-no')\r\n\t$('.modal-filter[data-modal=\"content-sort\"]').addClass('active')\r\n})\r\n\r\n$('.modal-filter svg').on('click', function () {\r\n\t$('body').removeClass('scroll-no')\r\n\t$('.modal-filter').removeClass('active')\r\n})\r\n\r\n//// показать еще\r\n//$('.show__more a').on('click', function (e) {\r\n//\te.preventDefault()\r\n//\t$('.shop__items.close').addClass('open')\r\n//})\r\n\r\n// при наведений на цвет смена товара\r\nlet img_url = ''\r\nlet active_color_img = true\r\n$('.color-select__item i').on('click', function (e) {\r\n\te.preventDefault()\r\n\tactive_color_img = false\r\n\t$(this).parents('.color-select__list').find('i').removeClass('color-select__btn--active')\r\n\t$(this).addClass('color-select__btn--active')\r\n\t$(this).parents('.shop__item').find('img').attr('src', $(this).attr('data-url'))\r\n\t$(this).parents('.shop__item').attr('href', $(this).attr('data-product-url'))\r\n\t$(this).parents('.shop__item').attr('title', $(this).attr('data-product-title'))\r\n})\r\n\r\n//$('.color-select__item i').hover(\r\n//\tfunction () {\r\n//\t\timg_url = $(this).parents('.shop__item').find('img').attr('src')\r\n//\t\t$(this).parents('.shop__item').find('img').attr('src', $(this).attr('data-url'))\r\n//\t},\r\n//\tfunction () {\r\n//\t\tif (active_color_img) {\r\n//\t\t\t$(this).parents('.shop__item').find('img').attr('src', img_url)\r\n//\t\t}\r\n//\t}\r\n//)\r\n\r\n// показать еще\r\n$('.cart__more-btn').click(function () {\r\n\t$('.cart__more-text--hide').slideToggle(function(){\r\n\t\t$('.cart__more-btn').toggleClass(\"active\", function(){\r\n\t\t\tif ($('.cart__more-btn').hasClass('active')){\r\n\t\t\t\t$('.cart__more-btn').text($('.cart__more-btn').attr('data-hide'));\r\n\t\t\t} else{\r\n\t\t\t\t$('.cart__more-btn').text($('.cart__more-btn').attr('data-show'));\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t// if ($('.cart__more-btn').text() == \"Скрыть\") {\r\n\t// \t$(this).text(\"Показать еще\")\r\n\t// } else {\r\n\t// \t$(this).text(\"Скрыть\")\r\n\t// }\r\n});\r\n\r\n\r\n// // степпер цены\r\n// $(document).ready(function () {\r\n// \t$('.minus').click(function () {\r\n// \t\tlet $input = $(this).parent().find('input');\r\n// \t\tlet count = parseInt($input.val()) - 1;\r\n// \t\tcount = count < 1 ? 1 : count;\r\n// \t\t$input.val(count);\r\n// \t\t$input.change();\r\n// \t\treturn false;\r\n// \t});\r\n// \t$('.plus').click(function () {\r\n// \t\tlet $input = $(this).parent().find('input');\r\n// \t\t$input.val(parseInt($input.val()) + 1);\r\n// \t\t$input.change();\r\n// \t\treturn false;\r\n// \t});\r\n// });\r\n\r\n$(document).ready(function(){\r\n\tlanguageSwitcher.init_header();\r\n\tlanguageSwitcher.init_footer();\r\n})\r\n\r\n// моб версия-поиск\r\nif (document.querySelector('.menu__item-search')) {\r\n\tvar menuSearch = document.querySelector('.menu__search-icon');\r\n\tvar headerContent = document.querySelector('.header__content');\r\n\tmenuSearch.addEventListener(\"click\", function (e) {\r\n\t\theaderContent.classList.toggle('active');\r\n\t});\r\n\tdocument.documentElement.addEventListener(\"click\", function (e) {\r\n\t\tif (!e.target.closest('.header__content')) {\r\n\t\t\theaderContent.classList.remove('active');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// пк версия-поиск\r\nif (document.querySelector('.menu__search-icon')) {\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tvar menuItemSearch = document.querySelector('.menu__item-search');\r\n\t\tvar menuItemSearchInput = document.querySelector('.menu__item-search input');\r\n\r\n\t\tmenuItemSearch.addEventListener('mouseenter', function (e) {\r\n\t\t\tmenuItemSearchInput.classList.add('menu__item-input');\r\n\t\t});\r\n\t\tmenuItemSearch.addEventListener('mouseleave', function () {\r\n\t\t\tmenuItemSearchInput.classList.remove('menu__item-input');\r\n\t\t})\r\n\t})\r\n}\r\n\r\n// фильтр\r\njQuery(function ($) {\r\n\t$('.shop .shop__select .selectric').on('click', function () {\r\n\t\t$('.modal-select').addClass('open')\r\n\t\t$(`.shop__filter-content.show .selectric-wrapper`).removeClass('selectric-hover selectric-open')\r\n\t\t$(`.shop__filter-content .selectric-wrapper[data-type='${$(this).attr('data-type')}']`).addClass('selectric-hover selectric-open')\r\n\t})\r\n\r\n\t$('.modal-select .selectric').on('click', function () {\r\n\t\tif ($(`.shop__filter-content .selectric-wrapper[data-type='${$(this).attr('data-type')}']`).hasClass('selectric-open')) {\r\n\t\t\t$(`.shop__filter-content .selectric-wrapper[data-type='${$(this).attr('data-type')}']`).removeClass('selectric-hover selectric-open')\r\n\t\t} else {\r\n\t\t\t$(`.shop__filter-content .selectric-wrapper[data-type='${$(this).attr('data-type')}']`).addClass('selectric-hover selectric-open')\r\n\t\t}\r\n\t\tlet bool = true\r\n\t\tlet selects = Array.from($(`.shop__filter-content .selectric-wrapper`))\r\n\t\tselects.forEach((e) => {\r\n\t\t\tif ($(e).hasClass('selectric-open')) {\r\n\t\t\t\tbool = false\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (bool) {\r\n\t\t\t$('.modal-select').removeClass('open')\r\n\t\t}\r\n\t})\r\n\r\n\t$('.modal-select__bg').on('click', function () {\r\n\t\t$('.modal-select').removeClass('open')\r\n\t})\r\n\r\n\t$('.facet li').on('click', function(){\r\n\t\t// Click on facet value handler\r\n\t\twindow.location.href = $(this).find('a').attr('href');\r\n\t})\r\n\r\n\t$('.sort li').on('click', function(){\r\n\t\t// Click on sort option handler\r\n\t\t$(this).closest('form').submit();\r\n\t})\r\n})\r\n\r\n// 404 paint\r\nif (document.querySelector('.paint')) {\r\n\tvar cvets = ['#ff7c2a','#9d2b2e','#115e67'];\r\n\tvar $i=0;\r\n\r\n\tvar cvet = cvets[$i];\r\n\tvar $canvas = $('.p5Canvas');\r\n\tlet img;\r\n\tsetTimeout(function (){\r\n\t\t$(document).dblclick(function(event) {\r\n\t\t\tswitch (event.which) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\t$i++;\r\n\t\t\t\t\t$('.p5Canvas').css('cursor',`url(static/custom/build/img/cursor-${$i}.png), none`);\r\n\t\t\t\t\tcvet = cvets[$i];\r\n\t\t\t\t\tif ($i===3){\r\n\t\t\t\t\t\t$i=0;\r\n\t\t\t\t\t\tcvet = cvets[$i];\r\n\t\t\t\t\t\t$('.p5Canvas').css('cursor',`url(static/custom/build/img/cursor-${$i}.png), none`);\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},100);\r\n\r\n\tfunction preload() {\r\n\t\timg = loadImage('/static/custom/build/img/paint-404.jpg');\r\n\t}\r\n\r\n\tfunction setup() {\r\n\r\n\t\tvar can = createCanvas(685, 319);\r\n\t\tcan.center('horizontal');\r\n\t\timage(img, 0, 0);\r\n\t\tcan.parent('#paint');\r\n\t}\r\n\r\n\tfunction draw() {\r\n\t\tstroke(cvet);\r\n\t\tstrokeWeight(4);\r\n\r\n\t\tif (mouseIsPressed === true) {\r\n\r\n\t\t\tline(mouseX, mouseY, pmouseX, pmouseY);\r\n\r\n\t\t}\r\n\t}\r\n}"],"file":"app.min.js"}